Version 4
SHEET 1 4016 680
WIRE 1808 -288 1696 -288
WIRE 3040 -272 2960 -272
WIRE 3056 -272 3040 -272
WIRE 1696 -224 1696 -288
WIRE 2960 -224 2960 -272
WIRE 672 -160 400 -160
WIRE 1248 -160 752 -160
WIRE 2960 -112 2960 -144
WIRE 688 -96 608 -96
WIRE 720 -96 688 -96
WIRE 1248 -96 1248 -160
WIRE 1248 -96 800 -96
WIRE 1696 -80 1696 -144
WIRE 336 -48 336 -160
WIRE 400 -48 400 -160
WIRE 400 -48 336 -48
WIRE 448 -48 400 -48
WIRE 544 -48 528 -48
WIRE 1248 -48 1248 -96
WIRE 1728 -32 1696 -32
WIRE 96 0 -16 0
WIRE 272 0 176 0
WIRE 688 48 688 -96
WIRE 832 48 688 48
WIRE 960 48 832 48
WIRE 1088 48 1040 48
WIRE 1168 48 1088 48
WIRE 3040 48 2960 48
WIRE 1168 64 1168 48
WIRE 1696 80 1696 -32
WIRE 2960 96 2960 48
WIRE 688 128 688 48
WIRE 1088 144 1088 48
WIRE -16 176 -16 0
WIRE 1696 224 1696 160
WIRE 2960 224 2960 176
WIRE -16 272 -16 256
WIRE 336 272 336 48
WIRE 336 272 -16 272
WIRE 512 272 336 272
WIRE 608 272 608 0
WIRE 608 272 512 272
WIRE 688 272 688 192
WIRE 688 272 608 272
WIRE 1088 272 1088 224
WIRE 1088 272 688 272
WIRE 1168 272 1168 128
WIRE 1168 272 1088 272
WIRE 1248 272 1248 32
WIRE 1248 272 1168 272
WIRE 1312 272 1248 272
WIRE 512 304 512 272
FLAG 512 304 0
FLAG 1312 272 POL
FLAG 1696 224 0
FLAG 1728 -32 VDlow
FLAG 1696 -80 0
FLAG 1808 -288 VDhigh
FLAG 2960 -112 0
FLAG 2960 224 0
FLAG 3040 -272 VAhigh
FLAG 3040 48 VAlow
FLAG 832 48 Vout
FLAG 1088 48 Vsense
FLAG 336 -160 VcNPN1
FLAG 608 -96 VcNPN2
SYMBOL npn 272 -48 R0
WINDOW 3 70 65 Left 2
SYMATTR Value 2N2222
SYMATTR InstName Q2
SYMBOL diode 704 192 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -29 5 Left 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL res 1072 128 R0
SYMATTR InstName R1
SYMATTR Value 47k
SYMBOL res 1056 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 47k
SYMBOL cap 1152 64 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL voltage 1696 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PWL(0 1 0.1 1 0.100001 1k 0.2 1k 0.200001 1 0.5 1 0.500001 1k 0.6 1k 0.600001 1k 10 1k)
SYMBOL voltage 1696 -240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PWL(0 10k 0.1 10k 0.100001 9k 0.2 9k 0.200001 10k 0.5 10k 0.500001 9k 0.6 9k 0.60001 9k 10 9k)
SYMBOL voltage 2960 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PWL(0 5k 0.3 5k 0.300001 4k 0.4 4k 0.400001 5k 0.5 5k 0.500001 6k 0.6 6k 0.600001 5k 10 5k)
SYMBOL voltage 2960 -240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PWL(0 5k 0.3 5k 0.300001 6k 0.4 6k 0.400001 5k 0.5 5k 0.500001 4k 0.6 4k 0.600001 5k 10 5k)
SYMBOL voltage -16 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE(0 3.3 0 0 0 0.000001 0.00020)
SYMBOL voltage 1248 -64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 10
SYMBOL res 816 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 4.7k
SYMBOL npn 544 -96 R0
SYMATTR InstName Q1
SYMBOL res 768 -176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 4.7k
SYMBOL res 192 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 544 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 47k
TEXT -8 -88 Left 2 !.tran 0 0.25 0 .00001
TEXT 1320 0 Left 2 ;300 mA max
